<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=MrTeferi><link href=../utils/testing/ rel=prev><link href=../license/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.8"><title>Text Layer Classes - Proxyshop</title><link rel=stylesheet href=../assets/stylesheets/main.4b4a2bd9.min.css><script src=../assets/pymdownx-extras/material-extra-theme-TVq-kNRT.js type=text/javascript></script><script src=../assets/pymdownx-extras/material-extra-3rdparty-E-i8w1WA.js type=text/javascript></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css><link rel=stylesheet href=../assets/pymdownx-extras/extra-ed665380f8.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#text-layer-classes class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <a href=.. title=Proxyshop class="md-header__button md-logo" aria-label=Proxyshop> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Proxyshop </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Text Layer Classes </span> </div> </div> </div> <div class=md-header__options> <div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon"> <a href=javascript:toggleScheme(); title="Light mode" class=light-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </a> <a href=javascript:toggleScheme(); title="Dark mode" class=dark-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </a> <a href=javascript:toggleScheme(); title="System preference" class=system-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07 19.07 3.5m-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13.51 1.67m-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87.4 1.31M19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35-2.53-2.2m4.33-2.7 1.15-2.77 2.2 2.54-3.35.23m1.15-4.96-1.14-2.78 3.34.24-2.2 2.54M9.63 18.93l2.77 1.15-2.53 2.19-.24-3.34Z"/></svg> </a> <a href=javascript:toggleScheme(); title="Unknown scheme" class=unknown-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10Z"/></svg> </a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/MrTeferi/Proxyshop title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Proxyshop </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Proxyshop class="md-nav__button md-logo" aria-label=Proxyshop data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Proxyshop </label> <div class=md-nav__source> <a href=https://github.com/MrTeferi/Proxyshop title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Proxyshop </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Template Classes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Template Classes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../templates/_core/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/_cosmetic/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/_vector/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/adventure/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/basic_land/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/battle/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/classes/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/leveler/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/mdfc/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/mutate/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/normal/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/planar/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/planeswalker/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/prototype/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/saga/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/split/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/token/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../templates/transform/ class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Photoshop Helpers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Photoshop Helpers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../helpers/actions/ class=md-nav__link> <span class=md-ellipsis> Actions </span> </a> </li> <li class=md-nav__item> <a href=../helpers/adjustments/ class=md-nav__link> <span class=md-ellipsis> Adjustments </span> </a> </li> <li class=md-nav__item> <a href=../helpers/bounds/ class=md-nav__link> <span class=md-ellipsis> Bounds </span> </a> </li> <li class=md-nav__item> <a href=../helpers/colors/ class=md-nav__link> <span class=md-ellipsis> Colors </span> </a> </li> <li class=md-nav__item> <a href=../helpers/design/ class=md-nav__link> <span class=md-ellipsis> Design </span> </a> </li> <li class=md-nav__item> <a href=../helpers/document/ class=md-nav__link> <span class=md-ellipsis> Document </span> </a> </li> <li class=md-nav__item> <a href=../helpers/effects/ class=md-nav__link> <span class=md-ellipsis> Effects </span> </a> </li> <li class=md-nav__item> <a href=../helpers/expansion_symbol/ class=md-nav__link> <span class=md-ellipsis> Expansion Symbol </span> </a> </li> <li class=md-nav__item> <a href=../helpers/layers/ class=md-nav__link> <span class=md-ellipsis> Layers </span> </a> </li> <li class=md-nav__item> <a href=../helpers/masks/ class=md-nav__link> <span class=md-ellipsis> Masks </span> </a> </li> <li class=md-nav__item> <a href=../helpers/position/ class=md-nav__link> <span class=md-ellipsis> Position </span> </a> </li> <li class=md-nav__item> <a href=../helpers/text/ class=md-nav__link> <span class=md-ellipsis> Text </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> App Utilities </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> App Utilities </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../utils/build/ class=md-nav__link> <span class=md-ellipsis> Build </span> </a> </li> <li class=md-nav__item> <a href=../utils/compression/ class=md-nav__link> <span class=md-ellipsis> Compression </span> </a> </li> <li class=md-nav__item> <a href=../utils/decorators/ class=md-nav__link> <span class=md-ellipsis> Decorators </span> </a> </li> <li class=md-nav__item> <a href=../utils/dicts/ class=md-nav__link> <span class=md-ellipsis> Dicts </span> </a> </li> <li class=md-nav__item> <a href=../utils/download/ class=md-nav__link> <span class=md-ellipsis> Download </span> </a> </li> <li class=md-nav__item> <a href=../utils/env/ class=md-nav__link> <span class=md-ellipsis> Env </span> </a> </li> <li class=md-nav__item> <a href=../utils/exceptions/ class=md-nav__link> <span class=md-ellipsis> Exceptions </span> </a> </li> <li class=md-nav__item> <a href=../utils/files/ class=md-nav__link> <span class=md-ellipsis> Files </span> </a> </li> <li class=md-nav__item> <a href=../utils/fonts/ class=md-nav__link> <span class=md-ellipsis> Fonts </span> </a> </li> <li class=md-nav__item> <a href=../utils/image/ class=md-nav__link> <span class=md-ellipsis> Image </span> </a> </li> <li class=md-nav__item> <a href=../utils/modules/ class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=../utils/objects/ class=md-nav__link> <span class=md-ellipsis> Objects </span> </a> </li> <li class=md-nav__item> <a href=../utils/regex/ class=md-nav__link> <span class=md-ellipsis> Regex </span> </a> </li> <li class=md-nav__item> <a href=../utils/scryfall/ class=md-nav__link> <span class=md-ellipsis> Scryfall </span> </a> </li> <li class=md-nav__item> <a href=../utils/strings/ class=md-nav__link> <span class=md-ellipsis> Strings </span> </a> </li> <li class=md-nav__item> <a href=../utils/testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Text Layer Classes </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Text Layer Classes </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#src.text_layers class=md-nav__link> text_layers </a> </li> <li class=md-nav__item> <a href=#src.text_layers.NO_DIALOG class=md-nav__link> NO_DIALOG </a> </li> <li class=md-nav__item> <a href=#src.text_layers.CreatureFormattedTextArea class=md-nav__link> CreatureFormattedTextArea </a> </li> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextArea class=md-nav__link> FormattedTextArea </a> <nav class=md-nav aria-label=FormattedTextArea> <ul class=md-nav__list> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextArea.insert_divider class=md-nav__link> insert_divider() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextField class=md-nav__link> FormattedTextField </a> <nav class=md-nav aria-label=FormattedTextField> <ul class=md-nav__list> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextField.format_text class=md-nav__link> format_text() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#src.text_layers.ScaledTextField class=md-nav__link> ScaledTextField </a> </li> <li class=md-nav__item> <a href=#src.text_layers.ScaledWidthTextField class=md-nav__link> ScaledWidthTextField </a> </li> <li class=md-nav__item> <a href=#src.text_layers.TextField class=md-nav__link> TextField </a> <nav class=md-nav aria-label=TextField> <ul class=md-nav__list> <li class=md-nav__item> <a href=#src.text_layers.TextField.execute class=md-nav__link> execute() </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#src.text_layers class=md-nav__link> text_layers </a> </li> <li class=md-nav__item> <a href=#src.text_layers.NO_DIALOG class=md-nav__link> NO_DIALOG </a> </li> <li class=md-nav__item> <a href=#src.text_layers.CreatureFormattedTextArea class=md-nav__link> CreatureFormattedTextArea </a> </li> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextArea class=md-nav__link> FormattedTextArea </a> <nav class=md-nav aria-label=FormattedTextArea> <ul class=md-nav__list> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextArea.insert_divider class=md-nav__link> insert_divider() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextField class=md-nav__link> FormattedTextField </a> <nav class=md-nav aria-label=FormattedTextField> <ul class=md-nav__list> <li class=md-nav__item> <a href=#src.text_layers.FormattedTextField.format_text class=md-nav__link> format_text() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#src.text_layers.ScaledTextField class=md-nav__link> ScaledTextField </a> </li> <li class=md-nav__item> <a href=#src.text_layers.ScaledWidthTextField class=md-nav__link> ScaledWidthTextField </a> </li> <li class=md-nav__item> <a href=#src.text_layers.TextField class=md-nav__link> TextField </a> <nav class=md-nav aria-label=TextField> <ul class=md-nav__list> <li class=md-nav__item> <a href=#src.text_layers.TextField.execute class=md-nav__link> execute() </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=text-layer-classes>Text Layer Classes</h1> <div class="doc doc-object doc-module"> <a id=src.text_layers></a> <div class="doc doc-contents first"> <p>TEXT LAYER MODULE</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h2 id=src.text_layers.NO_DIALOG class="doc doc-heading"> <code class="highlight language-python"><span class=n>NO_DIALOG</span> <span class=o>=</span> <span class=n>DialogModes</span><span class=o>.</span><span class=n>DisplayNoDialogs</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> </h2> <div class="doc doc-contents "> <p>Text Layer Classes</p> </div> </div> <div class="doc doc-object doc-class"> <h2 id=src.text_layers.CreatureFormattedTextArea class="doc doc-heading"> <code>CreatureFormattedTextArea</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=src.text_layers.FormattedTextArea href=#src.text_layers.FormattedTextArea>FormattedTextArea</a></code></p> <p>FormattedTextArea which also respects the bounds of creature card's power/toughness boxes. If the rasterized and centered text layer overlaps with another specified reference layer (which should represent the bounds of the power/toughness box), the layer will be shifted vertically to ensure that it doesn't overlap.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span> <span class=nc>CreatureFormattedTextArea</span> <span class=p>(</span><span class=n>FormattedTextArea</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    FormattedTextArea which also respects the bounds of creature card&#39;s power/toughness boxes.</span>
<span class=sd>    If the rasterized and centered text layer overlaps with another specified reference layer</span>
<span class=sd>    (which should represent the bounds of the power/toughness box), the layer will be shifted</span>
<span class=sd>    vertically to ensure that it doesn&#39;t overlap.</span>
<span class=sd>    &quot;&quot;&quot;</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    PROPERTIES</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>pt_reference</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>ArtLayer</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;pt_reference&#39;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>pt_top_reference</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>ArtLayer</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;pt_top_reference&#39;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    METHODS</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

        <span class=c1># Shift vertically if the text overlaps the PT box</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>pt_reference</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>pt_top_reference</span><span class=p>:</span>
            <span class=n>delta</span> <span class=o>=</span> <span class=n>ft</span><span class=o>.</span><span class=n>vertically_nudge_creature_text</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>pt_reference</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>pt_top_reference</span><span class=p>)</span>
            <span class=c1># Shift the divider as well</span>
            <span class=k>if</span> <span class=n>delta</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>divider</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>divider</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>delta</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=src.text_layers.FormattedTextArea class="doc doc-heading"> <code>FormattedTextArea</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=src.text_layers.FormattedTextField href=#src.text_layers.FormattedTextField>FormattedTextField</a></code></p> <p>A FormattedTextField where the text is required to fit within a given area. An instance of this class will step down the font size until the text fits within the reference layer's bounds, then rasterize the text layer, and center it vertically with respect to the reference layer's selection area.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span> <span class=nc>FormattedTextArea</span> <span class=p>(</span><span class=n>FormattedTextField</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    A FormattedTextField where the text is required to fit within a given area.</span>
<span class=sd>    An instance of this class will step down the font size until the text fits</span>
<span class=sd>    within the reference layer&#39;s bounds, then rasterize the text layer, and</span>
<span class=sd>    center it vertically with respect to the reference layer&#39;s selection area.</span>
<span class=sd>    &quot;&quot;&quot;</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    PROPERTIES</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>divider</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=n>ArtLayer</span><span class=p>,</span> <span class=n>LayerSet</span><span class=p>]]:</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>divider</span> <span class=o>:=</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;divider&#39;</span><span class=p>))</span> <span class=ow>and</span> <span class=nb>all</span><span class=p>([</span><span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents</span><span class=p>,</span> <span class=n>cfg</span><span class=o>.</span><span class=n>flavor_divider</span><span class=p>]):</span>
            <span class=n>divider</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=k>return</span> <span class=n>divider</span>
        <span class=k>return</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>scale_height</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=c1># Scale text to fit reference height (Default: True)</span>
        <span class=k>if</span> <span class=n>scale_height</span> <span class=o>:=</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;scale_height&#39;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>scale_height</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>scale_width</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=c1># Scale text to fit reference width (Default: False)</span>
        <span class=k>if</span> <span class=n>scale_width</span> <span class=o>:=</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;scale_width&#39;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>scale_width</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>fix_overflow_width</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=c1># Scale text to fit bounding box width (Default: False)</span>
        <span class=k>if</span> <span class=n>fix_overflow_width</span> <span class=o>:=</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;fix_overflow_width&#39;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>fix_overflow_width</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>fix_overflow_height</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=c1># Scale text to fit bounding box height (Default: If overflow the bounds)</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>contents</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>280</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=k>if</span> <span class=n>fix_overflow_height</span> <span class=o>:=</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;fix_overflow_height&#39;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>fix_overflow_height</span>
        <span class=k>return</span> <span class=kc>False</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    METHODS</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=nf>insert_divider</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Inserts and correctly positions flavor text divider.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Create a reference layer with no effects</span>
        <span class=n>flavor</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>duplicate</span><span class=p>()</span>
        <span class=n>rules</span> <span class=o>=</span> <span class=n>flavor</span><span class=o>.</span><span class=n>duplicate</span><span class=p>()</span>
        <span class=n>flavor</span><span class=o>.</span><span class=n>rasterize</span><span class=p>(</span><span class=n>RasterizeType</span><span class=o>.</span><span class=n>EntireLayer</span><span class=p>)</span>
        <span class=n>remove_trailing_text</span><span class=p>(</span><span class=n>rules</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>rules_text_updated</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
        <span class=c1># TODO: Test if this line is necessary</span>
        <span class=c1># rules.rasterize(RasterizeType.EntireLayer)</span>
        <span class=n>select_layer_bounds</span><span class=p>(</span><span class=n>rules</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>activeLayer</span> <span class=o>=</span> <span class=n>flavor</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>selection</span><span class=o>.</span><span class=n>expand</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>selection</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>

        <span class=c1># Move flavor text to bottom, then position divider</span>
        <span class=n>flavor</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>get_text_layer_bounds</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>)[</span><span class=mi>3</span><span class=p>]</span> <span class=o>-</span> <span class=n>flavor</span><span class=o>.</span><span class=n>bounds</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span>
        <span class=n>position_between_layers</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>divider</span><span class=p>,</span> <span class=n>rules</span><span class=p>,</span> <span class=n>flavor</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>selection</span><span class=o>.</span><span class=n>deselect</span><span class=p>()</span>
        <span class=n>flavor</span><span class=o>.</span><span class=n>remove</span><span class=p>()</span>
        <span class=n>rules</span><span class=o>.</span><span class=n>remove</span><span class=p>()</span>

    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>

        <span class=c1># Skip if both are empty</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>return</span>

        <span class=c1># Fix height overflow before formatting text</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>fix_overflow_height</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>:</span>
            <span class=n>contents</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents</span> <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span> <span class=k>else</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>contents</span> <span class=o>+</span> <span class=s2>&quot;</span><span class=se>\r</span><span class=s2>&quot;</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>contents</span> <span class=o>=</span> <span class=n>contents</span>
            <span class=n>ft</span><span class=o>.</span><span class=n>scale_text_to_fit_reference</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>get_layer_dimensions</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>)[</span><span class=s1>&#39;height&#39;</span><span class=p>]</span><span class=o>*</span><span class=mf>1.01</span><span class=p>)</span>
            <span class=p>)</span>

        <span class=c1># Execute text formatting</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

        <span class=c1># Resize the text until it fits the reference vertically</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>scale_height</span><span class=p>:</span>
            <span class=n>ft</span><span class=o>.</span><span class=n>scale_text_to_fit_reference</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>)</span>

        <span class=c1># Resize the text until it fits the reference horizontally</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>scale_width</span><span class=p>:</span>
            <span class=n>ft</span><span class=o>.</span><span class=n>scale_text_to_fit_reference</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>step</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>

        <span class=c1># Resize the text until it fits the TextLayer bounding box</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>fix_overflow_width</span><span class=p>:</span>
            <span class=n>ft</span><span class=o>.</span><span class=n>scale_text_to_fit_textbox</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>)</span>

        <span class=c1># Ensure the layer is centered vertically</span>
        <span class=n>ft</span><span class=o>.</span><span class=n>vertically_align_text</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>)</span>

        <span class=c1># Ensure the layer is centered horizontally if needed</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents_centered</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_centered</span><span class=p>:</span>
            <span class=n>align_horizontal</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>)</span>

        <span class=c1># Insert flavor divider if needed</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>divider</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>insert_divider</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=src.text_layers.FormattedTextArea.insert_divider class="doc doc-heading"> <code class="highlight language-python"><span class=n>insert_divider</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Inserts and correctly positions flavor text divider.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span> <span class=nf>insert_divider</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Inserts and correctly positions flavor text divider.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Create a reference layer with no effects</span>
    <span class=n>flavor</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>duplicate</span><span class=p>()</span>
    <span class=n>rules</span> <span class=o>=</span> <span class=n>flavor</span><span class=o>.</span><span class=n>duplicate</span><span class=p>()</span>
    <span class=n>flavor</span><span class=o>.</span><span class=n>rasterize</span><span class=p>(</span><span class=n>RasterizeType</span><span class=o>.</span><span class=n>EntireLayer</span><span class=p>)</span>
    <span class=n>remove_trailing_text</span><span class=p>(</span><span class=n>rules</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>rules_text_updated</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
    <span class=c1># TODO: Test if this line is necessary</span>
    <span class=c1># rules.rasterize(RasterizeType.EntireLayer)</span>
    <span class=n>select_layer_bounds</span><span class=p>(</span><span class=n>rules</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>activeLayer</span> <span class=o>=</span> <span class=n>flavor</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>selection</span><span class=o>.</span><span class=n>expand</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>selection</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>

    <span class=c1># Move flavor text to bottom, then position divider</span>
    <span class=n>flavor</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>get_text_layer_bounds</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>)[</span><span class=mi>3</span><span class=p>]</span> <span class=o>-</span> <span class=n>flavor</span><span class=o>.</span><span class=n>bounds</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span>
    <span class=n>position_between_layers</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>divider</span><span class=p>,</span> <span class=n>rules</span><span class=p>,</span> <span class=n>flavor</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>selection</span><span class=o>.</span><span class=n>deselect</span><span class=p>()</span>
    <span class=n>flavor</span><span class=o>.</span><span class=n>remove</span><span class=p>()</span>
    <span class=n>rules</span><span class=o>.</span><span class=n>remove</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=src.text_layers.FormattedTextField class="doc doc-heading"> <code>FormattedTextField</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=src.text_layers.TextField href=#src.text_layers.TextField>TextField</a></code></p> <p>A utility class for packing in the required infrastructure to format text with action descriptors.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span> <span class=nc>FormattedTextField</span> <span class=p>(</span><span class=n>TextField</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    A utility class for packing in the required infrastructure to format text with action descriptors.</span>
<span class=sd>    &quot;&quot;&quot;</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    PROPERTIES</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>text_details</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>

        <span class=c1># Generate italic text arrays from things in (parentheses), ability words, and the given flavor text</span>
        <span class=n>italic_text</span> <span class=o>=</span> <span class=n>ft</span><span class=o>.</span><span class=n>generate_italics</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>contents</span><span class=p>)</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents</span> <span class=k>else</span> <span class=p>[]</span>

        <span class=c1># Add flavor text to italics array</span>
        <span class=n>flavor_text</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s2>&quot;*&quot;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>2</span><span class=p>:</span>
            <span class=c1># Don&#39;t italicize text between asterisk</span>
            <span class=n>flavor_text_split</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;*&quot;</span><span class=p>)</span>
            <span class=n>italic_text</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=n>v</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>flavor_text_split</span><span class=p>)</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>i</span> <span class=o>%</span> <span class=mi>2</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>v</span> <span class=o>==</span> <span class=s1>&#39;&#39;</span><span class=p>])</span>
            <span class=n>flavor_text</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>flavor_text_split</span><span class=p>)</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=p>:</span>
            <span class=c1># Regular flavor text</span>
            <span class=n>italic_text</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=p>)</span>

        <span class=c1># Locate symbols and update the input string</span>
        <span class=n>ret</span> <span class=o>=</span> <span class=n>ft</span><span class=o>.</span><span class=n>locate_symbols</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>contents</span><span class=p>)</span>
        <span class=n>input_string</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ret</span><span class=p>[</span><span class=s1>&#39;input_string&#39;</span><span class=p>]</span><span class=si>}</span><span class=se>\r</span><span class=si>{</span><span class=n>flavor_text</span><span class=si>}</span><span class=s2>&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents</span> <span class=k>else</span> <span class=n>flavor_text</span>

        <span class=c1># Locate italics text indices</span>
        <span class=n>italics_indices</span> <span class=o>=</span> <span class=n>ft</span><span class=o>.</span><span class=n>locate_italics</span><span class=p>(</span><span class=n>input_string</span><span class=p>,</span> <span class=n>italic_text</span><span class=p>)</span>

        <span class=k>return</span> <span class=p>{</span>
            <span class=s1>&#39;input_string&#39;</span><span class=p>:</span> <span class=n>input_string</span><span class=p>,</span>
            <span class=s1>&#39;symbol_indices&#39;</span><span class=p>:</span> <span class=n>ret</span><span class=p>[</span><span class=s1>&#39;symbol_indices&#39;</span><span class=p>],</span>
            <span class=s1>&#39;italics_indices&#39;</span><span class=p>:</span> <span class=n>italics_indices</span><span class=p>,</span>
            <span class=s1>&#39;rules_text&#39;</span><span class=p>:</span> <span class=n>ret</span><span class=p>[</span><span class=s1>&#39;input_string&#39;</span><span class=p>],</span>
            <span class=s1>&#39;flavor_text&#39;</span><span class=p>:</span> <span class=n>flavor_text</span><span class=p>,</span>
        <span class=p>}</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>italics_indices</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>dict</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>text_details</span><span class=p>[</span><span class=s1>&#39;italics_indices&#39;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>symbol_indices</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>dict</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>text_details</span><span class=p>[</span><span class=s1>&#39;symbol_indices&#39;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>input</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>text_details</span><span class=p>[</span><span class=s1>&#39;input_string&#39;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>flavor_text_updated</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>text_details</span><span class=p>[</span><span class=s1>&#39;flavor_text&#39;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>rules_text_updated</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>text_details</span><span class=p>[</span><span class=s1>&#39;rules_text&#39;</span><span class=p>]</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>flavor_text</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;flavor&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>,</span> <span class=s1>&#39;</span><span class=se>\r</span><span class=s1>&#39;</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>divider</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>ArtLayer</span><span class=p>]:</span>
        <span class=c1># Default to None unless overridden</span>
        <span class=k>return</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>contents_centered</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;centered&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>flavor_centered</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;flavor_centered&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents_centered</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>line_break_lead</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Union</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
            <span class=s1>&#39;line_break_lead&#39;</span><span class=p>,</span>
            <span class=mi>0</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents_centered</span> <span class=k>else</span> <span class=n>con</span><span class=o>.</span><span class=n>line_break_lead</span>
        <span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>flavor_text_lead</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Union</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
        <span class=c1># Lead with divider</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>divider</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;flavor_text_lead_divider&#39;</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>flavor_text_lead_divider</span><span class=p>)</span>
        <span class=c1># Lead without divider</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;flavor_text_lead&#39;</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>flavor_text_lead</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>flavor_index</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>contents</span><span class=p>)</span> <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>flavor_text</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=o>-</span><span class=mi>1</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>quote_index</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\r</span><span class=s2>&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>+</span> <span class=mi>3</span><span class=p>)</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=k>else</span> <span class=o>-</span><span class=mi>1</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>bold_rules_text</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;bold_rules_text&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>right_align_quote</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;right_align_quote&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>flavor_color</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>SolidColor</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;flavor_color&#39;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>font_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>font_size</span> <span class=o>:=</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;font_size&#39;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>font_size</span> <span class=o>*</span> <span class=n>get_text_scale_factor</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>size</span> <span class=o>*</span> <span class=n>get_text_scale_factor</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>)</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    METHODS</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=nf>format_text</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Inserts the given string into the active layer and formats it according to defined parameters with symbols</span>
<span class=sd>        from the NDPMTG font.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Set up main descriptors and lists</span>
        <span class=n>main_descriptor</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>style_list</span> <span class=o>=</span> <span class=n>ActionList</span><span class=p>()</span>
        <span class=n>main_list</span> <span class=o>=</span> <span class=n>ActionList</span><span class=p>()</span>

        <span class=c1># Descriptor ID&#39;s</span>
        <span class=n>idTo</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;to&quot;</span><span class=p>)</span>
        <span class=n>size</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;size&quot;</span><span class=p>)</span>
        <span class=n>idFrom</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;from&quot;</span><span class=p>)</span>
        <span class=n>leading</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;leading&quot;</span><span class=p>)</span>
        <span class=n>fontName</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;fontName&quot;</span><span class=p>)</span>
        <span class=n>textStyle</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyle&quot;</span><span class=p>)</span>
        <span class=n>pointsUnit</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;pointsUnit&quot;</span><span class=p>)</span>
        <span class=n>spaceAfter</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;spaceAfter&quot;</span><span class=p>)</span>
        <span class=n>autoLeading</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;autoLeading&quot;</span><span class=p>)</span>
        <span class=n>startIndent</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;startIndent&quot;</span><span class=p>)</span>
        <span class=n>spaceBefore</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;spaceBefore&quot;</span><span class=p>)</span>
        <span class=n>leadingType</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;leadingType&quot;</span><span class=p>)</span>
        <span class=n>styleRange</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyleRange&quot;</span><span class=p>)</span>
        <span class=n>paragraphStyle</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;paragraphStyle&quot;</span><span class=p>)</span>
        <span class=n>firstLineIndent</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;firstLineIndent&quot;</span><span class=p>)</span>
        <span class=n>fontPostScriptName</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;fontPostScriptName&quot;</span><span class=p>)</span>
        <span class=n>paragraphStyleRange</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;paragraphStyleRange&quot;</span><span class=p>)</span>

        <span class=c1># Spin up the text insertion action</span>
        <span class=n>main_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>main_range</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textKey&quot;</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>)</span>
        <span class=n>main_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>main_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>
        <span class=n>main_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text</span><span class=p>)</span>  <span class=c1># MPlantin default</span>
        <span class=n>main_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text</span><span class=p>)</span>  <span class=c1># MPlantin default</span>
        <span class=n>main_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
        <span class=n>apply_color</span><span class=p>(</span><span class=n>main_style</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>)</span>
        <span class=n>main_style</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
        <span class=n>main_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
        <span class=n>main_range</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>textStyle</span><span class=p>,</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>main_style</span><span class=p>)</span>
        <span class=n>main_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>main_range</span><span class=p>)</span>

        <span class=c1># Bold the contents if necessary</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>bold_rules_text</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>bold_range</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
            <span class=n>bold_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
            <span class=n>contents_index</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>-</span> <span class=mi>1</span>
            <span class=n>bold_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>  <span class=c1># bold start index</span>
            <span class=n>bold_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>contents_index</span><span class=p>)</span>  <span class=c1># bold end index</span>
            <span class=n>bold_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_bold</span><span class=p>)</span>
            <span class=n>bold_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_bold</span><span class=p>)</span>
            <span class=n>bold_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
            <span class=n>apply_color</span><span class=p>(</span><span class=n>bold_style</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>)</span>
            <span class=n>bold_style</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
            <span class=n>bold_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
            <span class=n>bold_range</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>textStyle</span><span class=p>,</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>bold_style</span><span class=p>)</span>
            <span class=n>main_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>bold_range</span><span class=p>)</span>

        <span class=c1># Italicize text from our italics indices</span>
        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>italics_indices</span><span class=p>:</span>
            <span class=n>italic_range</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
            <span class=n>italic_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
            <span class=n>italic_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=n>i</span><span class=p>[</span><span class=s1>&#39;start_index&#39;</span><span class=p>])</span>  <span class=c1># italics start index</span>
            <span class=n>italic_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>i</span><span class=p>[</span><span class=s1>&#39;end_index&#39;</span><span class=p>])</span>  <span class=c1># italics end index</span>
            <span class=n>italic_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>
            <span class=n>italic_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>
            <span class=n>italic_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
            <span class=n>apply_color</span><span class=p>(</span><span class=n>italic_style</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>)</span>
            <span class=n>italic_style</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
            <span class=n>italic_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
            <span class=n>italic_range</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>textStyle</span><span class=p>,</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>italic_style</span><span class=p>)</span>
            <span class=n>main_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>italic_range</span><span class=p>)</span>

        <span class=c1># Format each symbol correctly</span>
        <span class=k>for</span> <span class=n>symbol_index</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>symbol_indices</span><span class=p>:</span>
            <span class=n>ft</span><span class=o>.</span><span class=n>format_symbol</span><span class=p>(</span>
                <span class=n>action_list</span><span class=o>=</span><span class=n>main_list</span><span class=p>,</span>
                <span class=n>symbol_index</span><span class=o>=</span><span class=n>symbol_index</span><span class=p>[</span><span class=s1>&#39;index&#39;</span><span class=p>],</span>
                <span class=n>symbol_colors</span><span class=o>=</span><span class=n>symbol_index</span><span class=p>[</span><span class=s1>&#39;colors&#39;</span><span class=p>],</span>
                <span class=n>font_size</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>,</span>
            <span class=p>)</span>

        <span class=c1># Insert actions for bold, italics, and symbol formatting</span>
        <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>main_list</span><span class=p>)</span>

        <span class=c1># Paragraph formatting</span>
        <span class=n>desc141</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>desc142</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>  <span class=c1># input string length</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>firstLineIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>startIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;endIndent&quot;</span><span class=p>),</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>line_break_lead</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceAfter</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;dropCapMultiplier&quot;</span><span class=p>),</span> <span class=mi>1</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putEnumerated</span><span class=p>(</span><span class=n>leadingType</span><span class=p>,</span> <span class=n>leadingType</span><span class=p>,</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;leadingBelow&quot;</span><span class=p>))</span>

        <span class=c1># Adjust formatting for modal card with bullet points</span>
        <span class=k>if</span> <span class=s2>&quot;</span><span class=se>\u2022</span><span class=s2>&quot;</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>:</span>
            <span class=n>desc143</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
            <span class=n>startIndexBullet</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\u2022</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=n>endIndexBullet</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>rindex</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\u2022</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=n>startIndexBullet</span><span class=p>)</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>endIndexBullet</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>firstLineIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=o>-</span><span class=n>con</span><span class=o>.</span><span class=n>modal_indent</span><span class=p>)</span>  <span class=c1># negative modal indent</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>startIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>modal_indent</span><span class=p>)</span>  <span class=c1># modal indent</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceAfter</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=n>desc143</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_mana</span><span class=p>)</span>  <span class=c1># NDPMTG default</span>
            <span class=n>desc143</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text</span><span class=p>)</span>  <span class=c1># MPlantin default</span>
            <span class=n>desc143</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>12</span><span class=p>)</span>
            <span class=n>desc143</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;defaultStyle&quot;</span><span class=p>),</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>desc143</span><span class=p>)</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>desc142</span><span class=p>)</span>
            <span class=n>style_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>desc141</span><span class=p>)</span>
            <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>style_list</span><span class=p>)</span>

        <span class=c1># Flavor text actions</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
            <span class=c1># Add linebreak spacing between rules and flavor text</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>+</span> <span class=mi>3</span><span class=p>)</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>+</span> <span class=mi>4</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>firstLineIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;impliedFirstLineIndent&quot;</span><span class=p>),</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>startIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;impliedStartIndent&quot;</span><span class=p>),</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text_lead</span><span class=p>)</span>  <span class=c1># Space between rules and flavor text</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>desc142</span><span class=p>)</span>
            <span class=n>style_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>desc141</span><span class=p>)</span>
            <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>style_list</span><span class=p>)</span>

            <span class=c1># Adjust flavor text color</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_color</span><span class=p>:</span>
                <span class=n>colored_range</span> <span class=o>=</span> <span class=n>ActionList</span><span class=p>()</span>
                <span class=n>colored_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
                <span class=n>desc145</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
                <span class=n>colored_style</span><span class=o>.</span><span class=n>PutInteger</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;from&quot;</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span><span class=p>)</span>
                <span class=n>colored_style</span><span class=o>.</span><span class=n>PutInteger</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;to&quot;</span><span class=p>),</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>
                <span class=n>desc145</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>  <span class=c1># MPlantin italic default</span>
                <span class=n>desc145</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>  <span class=c1># MPlantin italic default</span>
                <span class=n>desc145</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
                <span class=n>desc145</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
                <span class=n>desc145</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
                <span class=n>apply_color</span><span class=p>(</span><span class=n>desc145</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_color</span><span class=p>)</span>
                <span class=n>colored_style</span><span class=o>.</span><span class=n>PutObject</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyle&quot;</span><span class=p>),</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyle&quot;</span><span class=p>),</span> <span class=n>desc145</span><span class=p>)</span>
                <span class=n>colored_range</span><span class=o>.</span><span class=n>PutObject</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyleRange&quot;</span><span class=p>),</span> <span class=n>colored_style</span><span class=p>)</span>
                <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyleRange&quot;</span><span class=p>),</span> <span class=n>colored_range</span><span class=p>)</span>

        <span class=c1># Quote actions flavor text</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>quote_index</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
            <span class=c1># Adjust line break spacing if there&#39;s a line break in the flavor text</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>quote_index</span> <span class=o>+</span> <span class=mi>3</span><span class=p>)</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>
            <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=n>desc141</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>desc142</span><span class=p>)</span>
            <span class=n>style_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>desc141</span><span class=p>)</span>

            <span class=c1># Optional, align quote credit to right</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>right_align_quote</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;&quot;</span><span class=se>\r</span><span class=s1>—&#39;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
                <span class=c1># Get start and ending index of quotation credit</span>
                <span class=n>index_start</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;&quot;</span><span class=se>\r</span><span class=s1>—&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=mi>2</span>
                <span class=n>index_end</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span>

                <span class=c1># Align this part, disable justification reset</span>
                <span class=n>ft</span><span class=o>.</span><span class=n>align_formatted_text_right</span><span class=p>(</span><span class=n>style_list</span><span class=p>,</span> <span class=n>index_start</span><span class=p>,</span> <span class=n>index_end</span><span class=p>)</span>

            <span class=c1># Add quote actions to primary action</span>
            <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>style_list</span><span class=p>)</span>

        <span class=c1># Push changes to text layer</span>
        <span class=n>textLayer</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textLayer&quot;</span><span class=p>)</span>
        <span class=n>ref101</span> <span class=o>=</span> <span class=n>ActionReference</span><span class=p>()</span>
        <span class=n>desc119</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>ref101</span><span class=o>.</span><span class=n>putEnumerated</span><span class=p>(</span><span class=n>textLayer</span><span class=p>,</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;ordinal&quot;</span><span class=p>),</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;targetEnum&quot;</span><span class=p>))</span>
        <span class=n>desc119</span><span class=o>.</span><span class=n>putReference</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;target&quot;</span><span class=p>),</span> <span class=n>ref101</span><span class=p>)</span>
        <span class=n>desc119</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>textLayer</span><span class=p>,</span> <span class=n>main_descriptor</span><span class=p>)</span>
        <span class=n>app</span><span class=o>.</span><span class=n>executeAction</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;set&quot;</span><span class=p>),</span> <span class=n>desc119</span><span class=p>,</span> <span class=n>NO_DIALOG</span><span class=p>)</span>

        <span class=c1># Disable hyphenation and set text composer</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>activeLayer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>hyphenation</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=c1># TODO: Test if this line is necessary</span>
        <span class=c1># set_composer_single_line(self.layer)</span>

    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

        <span class=c1># Format text</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>activeLayer</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>layer</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>format_text</span><span class=p>()</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents_centered</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>justification</span> <span class=o>=</span> <span class=n>Justification</span><span class=o>.</span><span class=n>Center</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=src.text_layers.FormattedTextField.format_text class="doc doc-heading"> <code class="highlight language-python"><span class=n>format_text</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Inserts the given string into the active layer and formats it according to defined parameters with symbols from the NDPMTG font.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span> <span class=nf>format_text</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Inserts the given string into the active layer and formats it according to defined parameters with symbols</span>
<span class=sd>    from the NDPMTG font.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Set up main descriptors and lists</span>
    <span class=n>main_descriptor</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
    <span class=n>style_list</span> <span class=o>=</span> <span class=n>ActionList</span><span class=p>()</span>
    <span class=n>main_list</span> <span class=o>=</span> <span class=n>ActionList</span><span class=p>()</span>

    <span class=c1># Descriptor ID&#39;s</span>
    <span class=n>idTo</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;to&quot;</span><span class=p>)</span>
    <span class=n>size</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;size&quot;</span><span class=p>)</span>
    <span class=n>idFrom</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;from&quot;</span><span class=p>)</span>
    <span class=n>leading</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;leading&quot;</span><span class=p>)</span>
    <span class=n>fontName</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;fontName&quot;</span><span class=p>)</span>
    <span class=n>textStyle</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyle&quot;</span><span class=p>)</span>
    <span class=n>pointsUnit</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;pointsUnit&quot;</span><span class=p>)</span>
    <span class=n>spaceAfter</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;spaceAfter&quot;</span><span class=p>)</span>
    <span class=n>autoLeading</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;autoLeading&quot;</span><span class=p>)</span>
    <span class=n>startIndent</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;startIndent&quot;</span><span class=p>)</span>
    <span class=n>spaceBefore</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;spaceBefore&quot;</span><span class=p>)</span>
    <span class=n>leadingType</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;leadingType&quot;</span><span class=p>)</span>
    <span class=n>styleRange</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyleRange&quot;</span><span class=p>)</span>
    <span class=n>paragraphStyle</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;paragraphStyle&quot;</span><span class=p>)</span>
    <span class=n>firstLineIndent</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;firstLineIndent&quot;</span><span class=p>)</span>
    <span class=n>fontPostScriptName</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;fontPostScriptName&quot;</span><span class=p>)</span>
    <span class=n>paragraphStyleRange</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;paragraphStyleRange&quot;</span><span class=p>)</span>

    <span class=c1># Spin up the text insertion action</span>
    <span class=n>main_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
    <span class=n>main_range</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
    <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textKey&quot;</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>)</span>
    <span class=n>main_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>main_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>
    <span class=n>main_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text</span><span class=p>)</span>  <span class=c1># MPlantin default</span>
    <span class=n>main_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text</span><span class=p>)</span>  <span class=c1># MPlantin default</span>
    <span class=n>main_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
    <span class=n>apply_color</span><span class=p>(</span><span class=n>main_style</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>)</span>
    <span class=n>main_style</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
    <span class=n>main_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
    <span class=n>main_range</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>textStyle</span><span class=p>,</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>main_style</span><span class=p>)</span>
    <span class=n>main_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>main_range</span><span class=p>)</span>

    <span class=c1># Bold the contents if necessary</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>bold_rules_text</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
        <span class=n>bold_range</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>bold_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>contents_index</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>-</span> <span class=mi>1</span>
        <span class=n>bold_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>  <span class=c1># bold start index</span>
        <span class=n>bold_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>contents_index</span><span class=p>)</span>  <span class=c1># bold end index</span>
        <span class=n>bold_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_bold</span><span class=p>)</span>
        <span class=n>bold_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_bold</span><span class=p>)</span>
        <span class=n>bold_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
        <span class=n>apply_color</span><span class=p>(</span><span class=n>bold_style</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>)</span>
        <span class=n>bold_style</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
        <span class=n>bold_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
        <span class=n>bold_range</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>textStyle</span><span class=p>,</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>bold_style</span><span class=p>)</span>
        <span class=n>main_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>bold_range</span><span class=p>)</span>

    <span class=c1># Italicize text from our italics indices</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>italics_indices</span><span class=p>:</span>
        <span class=n>italic_range</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>italic_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>italic_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=n>i</span><span class=p>[</span><span class=s1>&#39;start_index&#39;</span><span class=p>])</span>  <span class=c1># italics start index</span>
        <span class=n>italic_range</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>i</span><span class=p>[</span><span class=s1>&#39;end_index&#39;</span><span class=p>])</span>  <span class=c1># italics end index</span>
        <span class=n>italic_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>
        <span class=n>italic_style</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>
        <span class=n>italic_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
        <span class=n>apply_color</span><span class=p>(</span><span class=n>italic_style</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>)</span>
        <span class=n>italic_style</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
        <span class=n>italic_style</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
        <span class=n>italic_range</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>textStyle</span><span class=p>,</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>italic_style</span><span class=p>)</span>
        <span class=n>main_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>italic_range</span><span class=p>)</span>

    <span class=c1># Format each symbol correctly</span>
    <span class=k>for</span> <span class=n>symbol_index</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>symbol_indices</span><span class=p>:</span>
        <span class=n>ft</span><span class=o>.</span><span class=n>format_symbol</span><span class=p>(</span>
            <span class=n>action_list</span><span class=o>=</span><span class=n>main_list</span><span class=p>,</span>
            <span class=n>symbol_index</span><span class=o>=</span><span class=n>symbol_index</span><span class=p>[</span><span class=s1>&#39;index&#39;</span><span class=p>],</span>
            <span class=n>symbol_colors</span><span class=o>=</span><span class=n>symbol_index</span><span class=p>[</span><span class=s1>&#39;colors&#39;</span><span class=p>],</span>
            <span class=n>font_size</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=c1># Insert actions for bold, italics, and symbol formatting</span>
    <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>styleRange</span><span class=p>,</span> <span class=n>main_list</span><span class=p>)</span>

    <span class=c1># Paragraph formatting</span>
    <span class=n>desc141</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
    <span class=n>desc142</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
    <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>  <span class=c1># input string length</span>
    <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>firstLineIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>startIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;endIndent&quot;</span><span class=p>),</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>line_break_lead</span><span class=p>)</span>
    <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceAfter</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>desc142</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;dropCapMultiplier&quot;</span><span class=p>),</span> <span class=mi>1</span><span class=p>)</span>
    <span class=n>desc142</span><span class=o>.</span><span class=n>putEnumerated</span><span class=p>(</span><span class=n>leadingType</span><span class=p>,</span> <span class=n>leadingType</span><span class=p>,</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;leadingBelow&quot;</span><span class=p>))</span>

    <span class=c1># Adjust formatting for modal card with bullet points</span>
    <span class=k>if</span> <span class=s2>&quot;</span><span class=se>\u2022</span><span class=s2>&quot;</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>:</span>
        <span class=n>desc143</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
        <span class=n>startIndexBullet</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\u2022</span><span class=s2>&quot;</span><span class=p>)</span>
        <span class=n>endIndexBullet</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>rindex</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\u2022</span><span class=s2>&quot;</span><span class=p>)</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=n>startIndexBullet</span><span class=p>)</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>endIndexBullet</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>firstLineIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=o>-</span><span class=n>con</span><span class=o>.</span><span class=n>modal_indent</span><span class=p>)</span>  <span class=c1># negative modal indent</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>startIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>modal_indent</span><span class=p>)</span>  <span class=c1># modal indent</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceAfter</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc143</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_mana</span><span class=p>)</span>  <span class=c1># NDPMTG default</span>
        <span class=n>desc143</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text</span><span class=p>)</span>  <span class=c1># MPlantin default</span>
        <span class=n>desc143</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>12</span><span class=p>)</span>
        <span class=n>desc143</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;defaultStyle&quot;</span><span class=p>),</span> <span class=n>textStyle</span><span class=p>,</span> <span class=n>desc143</span><span class=p>)</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>desc142</span><span class=p>)</span>
        <span class=n>style_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>desc141</span><span class=p>)</span>
        <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>style_list</span><span class=p>)</span>

    <span class=c1># Flavor text actions</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
        <span class=c1># Add linebreak spacing between rules and flavor text</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>+</span> <span class=mi>3</span><span class=p>)</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span> <span class=o>+</span> <span class=mi>4</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>firstLineIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;impliedFirstLineIndent&quot;</span><span class=p>),</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>startIndent</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;impliedStartIndent&quot;</span><span class=p>),</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_text_lead</span><span class=p>)</span>  <span class=c1># Space between rules and flavor text</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>desc142</span><span class=p>)</span>
        <span class=n>style_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>desc141</span><span class=p>)</span>
        <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>style_list</span><span class=p>)</span>

        <span class=c1># Adjust flavor text color</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_color</span><span class=p>:</span>
            <span class=n>colored_range</span> <span class=o>=</span> <span class=n>ActionList</span><span class=p>()</span>
            <span class=n>colored_style</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
            <span class=n>desc145</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
            <span class=n>colored_style</span><span class=o>.</span><span class=n>PutInteger</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;from&quot;</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_index</span><span class=p>)</span>
            <span class=n>colored_style</span><span class=o>.</span><span class=n>PutInteger</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;to&quot;</span><span class=p>),</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>
            <span class=n>desc145</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontPostScriptName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>  <span class=c1># MPlantin italic default</span>
            <span class=n>desc145</span><span class=o>.</span><span class=n>putString</span><span class=p>(</span><span class=n>fontName</span><span class=p>,</span> <span class=n>con</span><span class=o>.</span><span class=n>font_rules_text_italic</span><span class=p>)</span>  <span class=c1># MPlantin italic default</span>
            <span class=n>desc145</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
            <span class=n>desc145</span><span class=o>.</span><span class=n>putBoolean</span><span class=p>(</span><span class=n>autoLeading</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
            <span class=n>desc145</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>leading</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=p>)</span>
            <span class=n>apply_color</span><span class=p>(</span><span class=n>desc145</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>flavor_color</span><span class=p>)</span>
            <span class=n>colored_style</span><span class=o>.</span><span class=n>PutObject</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyle&quot;</span><span class=p>),</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyle&quot;</span><span class=p>),</span> <span class=n>desc145</span><span class=p>)</span>
            <span class=n>colored_range</span><span class=o>.</span><span class=n>PutObject</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyleRange&quot;</span><span class=p>),</span> <span class=n>colored_style</span><span class=p>)</span>
            <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textStyleRange&quot;</span><span class=p>),</span> <span class=n>colored_range</span><span class=p>)</span>

    <span class=c1># Quote actions flavor text</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>quote_index</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
        <span class=c1># Adjust line break spacing if there&#39;s a line break in the flavor text</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idFrom</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>quote_index</span> <span class=o>+</span> <span class=mi>3</span><span class=p>)</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putInteger</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>))</span>
        <span class=n>desc142</span><span class=o>.</span><span class=n>putUnitDouble</span><span class=p>(</span><span class=n>spaceBefore</span><span class=p>,</span> <span class=n>pointsUnit</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>desc141</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>paragraphStyle</span><span class=p>,</span> <span class=n>desc142</span><span class=p>)</span>
        <span class=n>style_list</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>desc141</span><span class=p>)</span>

        <span class=c1># Optional, align quote credit to right</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>right_align_quote</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;&quot;</span><span class=se>\r</span><span class=s1>—&#39;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
            <span class=c1># Get start and ending index of quotation credit</span>
            <span class=n>index_start</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;&quot;</span><span class=se>\r</span><span class=s1>—&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=mi>2</span>
            <span class=n>index_end</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span>

            <span class=c1># Align this part, disable justification reset</span>
            <span class=n>ft</span><span class=o>.</span><span class=n>align_formatted_text_right</span><span class=p>(</span><span class=n>style_list</span><span class=p>,</span> <span class=n>index_start</span><span class=p>,</span> <span class=n>index_end</span><span class=p>)</span>

        <span class=c1># Add quote actions to primary action</span>
        <span class=n>main_descriptor</span><span class=o>.</span><span class=n>putList</span><span class=p>(</span><span class=n>paragraphStyleRange</span><span class=p>,</span> <span class=n>style_list</span><span class=p>)</span>

    <span class=c1># Push changes to text layer</span>
    <span class=n>textLayer</span> <span class=o>=</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;textLayer&quot;</span><span class=p>)</span>
    <span class=n>ref101</span> <span class=o>=</span> <span class=n>ActionReference</span><span class=p>()</span>
    <span class=n>desc119</span> <span class=o>=</span> <span class=n>ActionDescriptor</span><span class=p>()</span>
    <span class=n>ref101</span><span class=o>.</span><span class=n>putEnumerated</span><span class=p>(</span><span class=n>textLayer</span><span class=p>,</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;ordinal&quot;</span><span class=p>),</span> <span class=n>sID</span><span class=p>(</span><span class=s2>&quot;targetEnum&quot;</span><span class=p>))</span>
    <span class=n>desc119</span><span class=o>.</span><span class=n>putReference</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;target&quot;</span><span class=p>),</span> <span class=n>ref101</span><span class=p>)</span>
    <span class=n>desc119</span><span class=o>.</span><span class=n>putObject</span><span class=p>(</span><span class=n>idTo</span><span class=p>,</span> <span class=n>textLayer</span><span class=p>,</span> <span class=n>main_descriptor</span><span class=p>)</span>
    <span class=n>app</span><span class=o>.</span><span class=n>executeAction</span><span class=p>(</span><span class=n>sID</span><span class=p>(</span><span class=s2>&quot;set&quot;</span><span class=p>),</span> <span class=n>desc119</span><span class=p>,</span> <span class=n>NO_DIALOG</span><span class=p>)</span>

    <span class=c1># Disable hyphenation and set text composer</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>docref</span><span class=o>.</span><span class=n>activeLayer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>hyphenation</span> <span class=o>=</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=src.text_layers.ScaledTextField class="doc doc-heading"> <code>ScaledTextField</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=src.text_layers.TextField href=#src.text_layers.TextField>TextField</a></code></p> <p>A TextField which automatically scales down its font size until the right bound no longer overlaps with a reference layer's left bound.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span> <span class=nc>ScaledTextField</span> <span class=p>(</span><span class=n>TextField</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    A TextField which automatically scales down its font size until the right bound</span>
<span class=sd>    no longer overlaps with a reference layer&#39;s left bound.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>flip_scale</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;flip_scale&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>scale_action</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Callable</span><span class=p>:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>flip_scale</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>ft</span><span class=o>.</span><span class=n>scale_text_left_overlap</span>
        <span class=k>return</span> <span class=n>ft</span><span class=o>.</span><span class=n>scale_text_right_overlap</span>

    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

        <span class=c1># Scale down the text layer until it doesn&#39;t overlap with a reference layer</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>scale_action</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=src.text_layers.ScaledWidthTextField class="doc doc-heading"> <code>ScaledWidthTextField</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=src.text_layers.TextField href=#src.text_layers.TextField>TextField</a></code></p> <p>A TextField which automatically scales down its font size until the width of the layer is within the horizontal bound of a reference layer.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span> <span class=nc>ScaledWidthTextField</span> <span class=p>(</span><span class=n>TextField</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    A TextField which automatically scales down its font size until the width of the</span>
<span class=sd>    layer is within the horizontal bound of a reference layer.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

        <span class=c1># Scale down the text layer until it doesn&#39;t overlap with a reference layer</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>:</span>
            <span class=n>ft</span><span class=o>.</span><span class=n>scale_text_to_fit_reference</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>reference</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=src.text_layers.TextField class="doc doc-heading"> <code>TextField</code> </h2> <div class="doc doc-contents "> <p>A generic TextField, which allows you to set a text layer's contents and text color. @param layer: TextItem layer to insert contents. @param contents: Text contents to be inserted. @param color: Font color to use for this TextItem. @param kwargs: Optional keyword parameters.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span> <span class=nc>TextField</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    A generic TextField, which allows you to set a text layer&#39;s contents and text color.</span>
<span class=sd>    @param layer: TextItem layer to insert contents.</span>
<span class=sd>    @param contents: Text contents to be inserted.</span>
<span class=sd>    @param color: Font color to use for this TextItem.</span>
<span class=sd>    @param kwargs: Optional keyword parameters.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>layer</span><span class=p>:</span> <span class=n>ArtLayer</span><span class=p>,</span> <span class=n>contents</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=c1># Mandatory attributes</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span> <span class=o>=</span> <span class=n>kwargs</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>layer</span> <span class=o>=</span> <span class=n>layer</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>contents</span> <span class=o>=</span> <span class=n>contents</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=se>\r</span><span class=s2>&quot;</span><span class=p>)</span>

        <span class=c1># Change to English formatting if needed</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>kind</span> <span class=o>==</span> <span class=n>LayerKind</span><span class=o>.</span><span class=n>TextLayer</span> <span class=ow>and</span> <span class=n>cfg</span><span class=o>.</span><span class=n>force_english_formatting</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>language</span> <span class=o>=</span> <span class=n>Language</span><span class=o>.</span><span class=n>EnglishUSA</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    PROPERTIES</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>input</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>contents</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>reference</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>ArtLayer</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;reference&#39;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>color</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>SolidColor</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;color&#39;</span><span class=p>,</span> <span class=n>get_text_layer_color</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=p>))</span>

    <span class=nd>@cached_property</span>
    <span class=k>def</span> <span class=nf>docref</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Document</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>app</span><span class=o>.</span><span class=n>activeDocument</span>

<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    METHODS</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Executes all text actions.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>contents</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>color</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=src.text_layers.TextField.execute class="doc doc-heading"> <code class="highlight language-python"><span class=n>execute</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Executes all text actions.</p> <details class=quote> <summary>Source code in <code>src/text_layers.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Executes all text actions.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>contents</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>layer</span><span class=o>.</span><span class=n>textItem</span><span class=o>.</span><span class=n>color</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=../utils/testing/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Testing </div> </div> </a> <a href=../license/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> License </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright (c) 2023 Chris McGuire </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> with emoji by <a href=https://github.com/twitter/twemoji target=_blank rel=noopener> Twemoji </a> </div> <div class=md-social> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.81fa17fe.min.js></script> <script src=../assets/pymdownx-extras/extra-loader-q9CWAeV9.js></script> </body> </html>